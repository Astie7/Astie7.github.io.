:root {
    --font-body: "Space Grotesk", "Segoe UI", sans-serif;
    --font-display: "Space Grotesk", "Segoe UI", sans-serif;

    --bg: #f2f8ff;
    --bg-soft: #e4f2ff;
    --bg-deep: #d4e9fb;
    --surface: rgba(255, 255, 255, 0.88);
    --surface-strong: rgba(255, 255, 255, 0.95);
    --surface-muted: rgba(241, 248, 255, 0.74);
    --border: rgba(23, 103, 150, 0.22);
    --border-strong: rgba(19, 108, 160, 0.36);

    --text: #0c2437;
    --text-muted: #325876;
    --text-faint: #4f7695;

    --accent: #1689c8;
    --accent-strong: #0f6ea9;
    --accent-soft: rgba(22, 137, 200, 0.17);
    --accent-2: #1eb59f;

    --danger: #c43f56;
    --danger-soft: rgba(196, 63, 86, 0.18);

    --shadow-soft: 0 10px 24px rgba(18, 61, 94, 0.12);
    --shadow-medium: 0 16px 34px rgba(18, 61, 94, 0.16);
    --shadow-strong: 0 22px 44px rgba(18, 61, 94, 0.22);

    --topbar-border: rgba(76, 156, 196, 0.36);
    --topbar-glow-a: rgba(78, 183, 216, 0.24);
    --topbar-glow-b: rgba(39, 145, 196, 0.16);
    --topbar-bg-a: rgba(228, 242, 252, 0.97);
    --topbar-bg-b: rgba(220, 237, 250, 0.96);
    --topbar-bg-c: rgba(228, 243, 252, 0.97);
    --topbar-shadow: rgba(29, 79, 118, 0.16);
    --topbar-inset: rgba(255, 255, 255, 0.72);

    --brand-border: rgba(86, 168, 206, 0.38);
    --brand-bg-a: rgba(244, 251, 255, 0.92);
    --brand-bg-b: rgba(231, 244, 252, 0.9);
    --brand-text: #134362;
    --brand-inset: rgba(255, 255, 255, 0.58);

    --nav-border: rgba(96, 176, 213, 0.38);
    --nav-bg-a: rgba(243, 250, 255, 0.92);
    --nav-bg-b: rgba(229, 243, 252, 0.9);
    --nav-link: #3d6888;
    --nav-link-hover-bg: rgba(59, 159, 205, 0.2);
    --nav-link-hover-text: #0f5f91;
    --nav-active-text: #f4fcff;
    --nav-active-a: #20a5d2;
    --nav-active-b: #2fc3b4;

    --auth-top-border: rgba(102, 176, 212, 0.34);
    --auth-top-bg-a: rgba(246, 252, 255, 0.96);
    --auth-top-bg-b: rgba(233, 245, 252, 0.92);
    --auth-top-text: #2c5a7b;

    --btn-primary-text: #f5fcff;
    --btn-primary-a: #1a9fd0;
    --btn-primary-b: #28c0ae;
    --btn-primary-shadow: rgba(18, 114, 153, 0.3);

    --btn-ghost-text: var(--text);
    --btn-ghost-border: rgba(100, 172, 210, 0.34);
    --btn-ghost-a: rgba(252, 255, 255, 0.98);
    --btn-ghost-b: rgba(236, 246, 252, 0.92);

    --hero-btn-primary-a: #22a8d7;
    --hero-btn-primary-b: #39c9b8;
    --hero-btn-primary-shadow: rgba(14, 109, 148, 0.27);
    --hero-btn-ghost-border: rgba(104, 178, 215, 0.36);
    --hero-btn-ghost-a: rgba(248, 253, 255, 0.97);
    --hero-btn-ghost-b: rgba(233, 245, 252, 0.93);
    --hero-btn-ghost-hover-border: rgba(90, 168, 208, 0.52);
    --hero-btn-ghost-hover-a: rgba(255, 255, 255, 0.99);
    --hero-btn-ghost-hover-b: rgba(236, 247, 253, 0.95);

    --hero-pill-border: rgba(116, 185, 222, 0.38);
    --hero-pill-bg: rgba(237, 246, 253, 0.78);
    --hero-pill-text: #3d6787;

    --radius-sm: 10px;
    --radius-md: 14px;
    --radius-lg: 18px;
    --radius-xl: 24px;
}

html[data-theme="dark"] {
    --bg: #061522;
    --bg-soft: #0a2133;
    --bg-deep: #102f44;
    --surface: rgba(9, 28, 44, 0.86);
    --surface-strong: rgba(8, 24, 38, 0.93);
    --surface-muted: rgba(11, 33, 51, 0.78);
    --border: rgba(111, 183, 223, 0.24);
    --border-strong: rgba(120, 199, 238, 0.38);

    --text: #e4f5ff;
    --text-muted: #a6c8de;
    --text-faint: #84abc4;

    --accent: #50c8ff;
    --accent-strong: #2aa6e4;
    --accent-soft: rgba(80, 200, 255, 0.21);
    --accent-2: #4dd8bd;

    --danger: #ff7992;
    --danger-soft: rgba(255, 121, 146, 0.25);

    --shadow-soft: 0 10px 26px rgba(0, 8, 16, 0.34);
    --shadow-medium: 0 16px 34px rgba(0, 8, 16, 0.42);
    --shadow-strong: 0 24px 52px rgba(0, 8, 16, 0.5);

    --topbar-border: rgba(96, 183, 223, 0.38);
    --topbar-glow-a: rgba(56, 180, 215, 0.22);
    --topbar-glow-b: rgba(41, 126, 182, 0.15);
    --topbar-bg-a: rgba(7, 28, 45, 0.96);
    --topbar-bg-b: rgba(8, 24, 40, 0.94);
    --topbar-bg-c: rgba(7, 27, 44, 0.95);
    --topbar-shadow: rgba(0, 11, 22, 0.3);
    --topbar-inset: rgba(173, 229, 255, 0.14);

    --brand-border: rgba(103, 190, 230, 0.38);
    --brand-bg-a: rgba(16, 50, 77, 0.88);
    --brand-bg-b: rgba(12, 39, 62, 0.86);
    --brand-text: #e8f7ff;
    --brand-inset: rgba(190, 237, 255, 0.16);

    --nav-border: rgba(109, 196, 234, 0.34);
    --nav-bg-a: rgba(14, 44, 69, 0.9);
    --nav-bg-b: rgba(10, 35, 57, 0.88);
    --nav-link: #a8cee5;
    --nav-link-hover-bg: rgba(69, 173, 217, 0.26);
    --nav-link-hover-text: #e1f4ff;
    --nav-active-text: #edfcff;
    --nav-active-a: #2fb6e3;
    --nav-active-b: #43d2c4;

    --auth-top-border: rgba(116, 193, 232, 0.3);
    --auth-top-bg-a: rgba(14, 42, 65, 0.9);
    --auth-top-bg-b: rgba(12, 36, 57, 0.86);
    --auth-top-text: #d2e9fb;

    --btn-primary-text: #f0fbff;
    --btn-primary-a: #2cb4e5;
    --btn-primary-b: #3fd4c0;
    --btn-primary-shadow: rgba(8, 79, 112, 0.4);

    --btn-ghost-text: #d7edfd;
    --btn-ghost-border: rgba(117, 193, 230, 0.3);
    --btn-ghost-a: rgba(14, 43, 68, 0.92);
    --btn-ghost-b: rgba(12, 37, 58, 0.88);

    --hero-btn-primary-a: #31bce9;
    --hero-btn-primary-b: #4bdac6;
    --hero-btn-primary-shadow: rgba(8, 84, 116, 0.42);
    --hero-btn-ghost-border: rgba(122, 197, 233, 0.34);
    --hero-btn-ghost-a: rgba(14, 44, 68, 0.92);
    --hero-btn-ghost-b: rgba(11, 36, 56, 0.9);
    --hero-btn-ghost-hover-border: rgba(145, 214, 245, 0.5);
    --hero-btn-ghost-hover-a: rgba(19, 54, 82, 0.95);
    --hero-btn-ghost-hover-b: rgba(13, 41, 64, 0.92);

    --hero-pill-border: rgba(121, 196, 233, 0.36);
    --hero-pill-bg: rgba(12, 39, 60, 0.68);
    --hero-pill-text: #b7d5e8;
}

html[data-theme="bright"] {
    --bg: #f7fbff;
    --bg-soft: #edf6ff;
    --bg-deep: #dfedf9;
    --surface: rgba(255, 255, 255, 0.9);
    --surface-strong: rgba(255, 255, 255, 0.97);
    --surface-muted: rgba(245, 251, 255, 0.8);
    --border: rgba(32, 110, 156, 0.22);
    --border-strong: rgba(28, 122, 172, 0.38);
    --text: #0c253a;
    --text-muted: #345a79;
    --text-faint: #547894;
    --accent: #148ecb;
    --accent-strong: #0f6da8;
    --accent-soft: rgba(20, 142, 203, 0.17);
    --accent-2: #21baa2;

    --topbar-border: rgba(104, 180, 218, 0.38);
    --topbar-glow-a: rgba(92, 189, 218, 0.26);
    --topbar-glow-b: rgba(53, 159, 200, 0.17);
    --topbar-bg-a: rgba(244, 250, 255, 0.98);
    --topbar-bg-b: rgba(236, 246, 253, 0.96);
    --topbar-bg-c: rgba(243, 250, 255, 0.97);
    --topbar-shadow: rgba(36, 84, 121, 0.14);
    --topbar-inset: rgba(255, 255, 255, 0.8);

    --brand-border: rgba(103, 181, 219, 0.4);
    --brand-bg-a: rgba(247, 252, 255, 0.96);
    --brand-bg-b: rgba(234, 246, 252, 0.94);
    --brand-text: #104562;
    --brand-inset: rgba(255, 255, 255, 0.72);

    --nav-border: rgba(105, 184, 221, 0.38);
    --nav-bg-a: rgba(246, 252, 255, 0.95);
    --nav-bg-b: rgba(234, 246, 252, 0.92);
    --nav-link: #406a88;
    --nav-link-hover-bg: rgba(58, 162, 205, 0.22);
    --nav-link-hover-text: #0f608f;
    --nav-active-text: #f4fdff;
    --nav-active-a: #1ba6d5;
    --nav-active-b: #35c7b6;

    --auth-top-border: rgba(111, 185, 220, 0.35);
    --auth-top-bg-a: rgba(248, 253, 255, 0.97);
    --auth-top-bg-b: rgba(236, 247, 253, 0.94);
    --auth-top-text: #2f5e7d;

    --btn-primary-a: #1ea7d8;
    --btn-primary-b: #31c8b4;
    --btn-primary-shadow: rgba(18, 112, 152, 0.28);

    --btn-ghost-border: rgba(108, 183, 219, 0.35);
    --btn-ghost-a: rgba(250, 254, 255, 0.98);
    --btn-ghost-b: rgba(238, 247, 253, 0.94);

    --hero-pill-border: rgba(122, 190, 225, 0.4);
    --hero-pill-bg: rgba(240, 248, 253, 0.84);
    --hero-pill-text: #3b6583;
}

*,
*::before,
*::after {
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

html.low-end-mode {
    scroll-behavior: auto;
}

body.page {
    margin: 0;
    min-height: 100vh;
    font-family: var(--font-body);
    color: var(--text);
    line-height: 1.55;
    letter-spacing: 0.01em;
    background:
        radial-gradient(72% 62% at 8% 0%, rgba(72, 178, 229, 0.3), transparent 65%),
        radial-gradient(78% 56% at 100% 0%, rgba(38, 169, 191, 0.2), transparent 64%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg-soft) 45%, var(--bg-deep) 100%);
    position: relative;
    overflow-x: clip;
}

body.page::before {
    content: "";
    position: fixed;
    inset: -20% -10% auto;
    height: 55vh;
    pointer-events: none;
    z-index: -1;
    background:
        radial-gradient(36% 58% at 15% 16%, rgba(23, 132, 176, 0.14), transparent 70%),
        radial-gradient(44% 64% at 86% 8%, rgba(20, 168, 196, 0.11), transparent 72%);
}

body.page-anim-ready {
    transition: opacity 180ms ease, transform 180ms ease;
    will-change: opacity, transform;
}

body.page-enter {
    opacity: 0;
    transform: translateY(6px);
}

body.page-leave {
    opacity: 0;
    transform: translateY(-4px);
}

::selection {
    background: rgba(23, 126, 184, 0.22);
    color: var(--text);
}

a {
    color: inherit;
    text-decoration: none;
}

img {
    max-width: 100%;
    display: block;
}

h1,
h2,
h3,
h4 {
    margin: 0 0 10px;
    font-family: var(--font-display);
    line-height: 1.12;
    letter-spacing: -0.02em;
    color: var(--text);
}

h1 {
    font-size: clamp(2.2rem, 5.2vw, 3.85rem);
}

h2 {
    font-size: clamp(1.7rem, 3.4vw, 2.65rem);
}

h3 {
    font-size: clamp(1.25rem, 2.5vw, 1.8rem);
}

p {
    margin: 0 0 12px;
    color: var(--text-muted);
}

.shell {
    width: min(1120px, 92vw);
    margin-inline: auto;
    padding-block: clamp(14px, 2.2vw, 26px);
}

.topbar.shell {
    width: 100%;
    max-width: none;
    padding-top: clamp(2px, 0.4vw, 5px);
    padding-bottom: 0;
    padding-inline: 0;
}

.topbar {
    position: sticky;
    top: max(0px, env(safe-area-inset-top));
    z-index: 24;
    padding: 0;
    border-radius: 0;
    border: 1px solid var(--topbar-border);
    background:
        radial-gradient(145% 180% at 0% 0%, var(--topbar-glow-a), transparent 48%),
        radial-gradient(120% 160% at 100% 100%, var(--topbar-glow-b), transparent 54%),
        linear-gradient(102deg, var(--topbar-bg-a), var(--topbar-bg-b) 52%, var(--topbar-bg-c));
    backdrop-filter: blur(12px) saturate(1.2);
    box-shadow:
        0 6px 14px var(--topbar-shadow),
        inset 0 1px 0 var(--topbar-inset);
}

.pmain-bar {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: clamp(4px, 0.5vw, 8px);
    min-height: clamp(34px, 2.3vw, 40px);
    padding: clamp(3px, 0.35vw, 5px) clamp(6px, 0.8vw, 10px);
    min-width: 0;
}

.topbar-left {
    display: flex;
    align-items: center;
    flex: 0 0 auto;
    min-width: 0;
}

.topbar .brand {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: clamp(5px, 0.4vw, 8px);
    min-height: clamp(26px, 1.8vw, 30px);
    max-inline-size: min(100%, 22rem);
    min-width: 0;
    padding: clamp(3px, 0.22vw, 5px) clamp(8px, 0.65vw, 11px);
    border-radius: 10px;
    border: 1px solid var(--brand-border);
    background: linear-gradient(145deg, var(--brand-bg-a), var(--brand-bg-b));
    color: var(--brand-text);
    font-size: clamp(0.76rem, 0.72rem + 0.1vw, 0.85rem);
    font-weight: 760;
    letter-spacing: 0.01em;
    box-shadow: inset 0 1px 0 var(--brand-inset);
    white-space: nowrap;
}

.topbar .brand span:last-child {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
}

.topbar .brand.brand-account-enabled {
    cursor: pointer;
}

.topbar .brand .dot {
    flex: 0 0 auto;
    width: clamp(12px, 0.85vw, 14px);
    height: clamp(12px, 0.85vw, 14px);
    border-radius: 50%;
    background:
        linear-gradient(140deg, rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.08)),
        url("Pantheverse.webp");
    background-size: cover;
    background-position: center;
    border: 1px solid rgba(220, 248, 255, 0.72);
    box-shadow: 0 0 0 2px rgba(26, 170, 209, 0.22);
}

.brand-account-menu {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    min-width: 220px;
    padding: 8px;
    border-radius: 12px;
    border: 1px solid var(--border-strong);
    background: var(--surface-strong);
    box-shadow: var(--shadow-medium);
    z-index: 35;
    display: none;
}

.brand-account-menu.open {
    display: grid;
    gap: 6px;
}

.brand-account-label {
    padding: 6px 8px;
    font-size: 12px;
    color: var(--text-faint);
    font-weight: 600;
}

.brand-account-item {
    border: 1px solid var(--border);
    border-radius: 8px;
    min-height: 36px;
    padding: 7px 10px;
    text-align: left;
    background: var(--surface-muted);
    color: var(--text);
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    transition: border-color 170ms ease, background 170ms ease;
}

.brand-account-item:hover {
    border-color: var(--border-strong);
    background: var(--accent-soft);
}

.brand-account-item.danger {
    border-color: rgba(196, 63, 86, 0.34);
    color: var(--danger);
}

.nav {
    margin-left: auto;
    display: flex;
    flex-wrap: nowrap;
    align-items: center;
    justify-content: flex-end;
    gap: 2px;
    padding: 2px;
    border-radius: 0;
    border: 1px solid var(--nav-border);
    background: linear-gradient(150deg, var(--nav-bg-a), var(--nav-bg-b));
    max-width: 100%;
    min-width: 0;
    flex: 0 0 auto;
}

.nav a,
.nav .btn {
    min-height: clamp(24px, 1.8vw, 30px);
    padding: clamp(2px, 0.2vw, 4px) clamp(8px, 0.72vw, 11px);
    border-radius: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
    font-size: clamp(0.74rem, 0.7rem + 0.1vw, 0.84rem);
}

.nav a {
    color: var(--nav-link);
    font-weight: 760;
    letter-spacing: 0.01em;
    transition: background 150ms ease, color 150ms ease;
}

.nav a:hover,
.nav a:focus-visible {
    background: var(--nav-link-hover-bg);
    color: var(--nav-link-hover-text);
}

.nav a.active {
    color: var(--nav-active-text);
    background: linear-gradient(135deg, var(--nav-active-a), var(--nav-active-b));
    box-shadow: none;
}

#top-signout-btn {
    display: none;
}

.auth-bridge {
    position: fixed;
    left: -9999px;
    top: -9999px;
    width: 0;
    height: 0;
    opacity: 0;
    pointer-events: none;
    overflow: hidden;
}

.auth-top-btn {
    min-height: 26px;
    padding: 4px 8px;
    border-radius: 0;
    font-size: 0.78rem;
    font-weight: 760;
    letter-spacing: 0.01em;
    border-color: var(--auth-top-border);
    background: linear-gradient(145deg, var(--auth-top-bg-a), var(--auth-top-bg-b));
    color: var(--auth-top-text);
}

.btn,
.edit-btn,
.delete-rule-btn {
    appearance: none;
    border: 1px solid var(--border);
    border-radius: 11px;
    min-height: 40px;
    padding: 10px 16px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-family: inherit;
    font-size: 0.93rem;
    font-weight: 700;
    letter-spacing: 0;
    text-decoration: none;
    color: var(--text);
    background: linear-gradient(140deg, var(--surface-strong), var(--surface-muted));
    cursor: pointer;
    transition: transform 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
}

.btn:hover,
.edit-btn:hover,
.delete-rule-btn:hover {
    transform: translateY(-1px);
    border-color: var(--border-strong);
    box-shadow: var(--shadow-soft);
}

.btn:disabled,
.edit-btn:disabled,
.delete-rule-btn:disabled {
    cursor: not-allowed;
    opacity: 0.6;
    transform: none;
    box-shadow: none;
}

.btn-primary,
.edit-btn {
    color: var(--btn-primary-text);
    border-color: transparent;
    background: linear-gradient(135deg, var(--btn-primary-a), var(--btn-primary-b));
    box-shadow: 0 10px 22px var(--btn-primary-shadow);
}

.btn-ghost {
    color: var(--btn-ghost-text);
    border-color: var(--btn-ghost-border);
    background: linear-gradient(140deg, var(--btn-ghost-a), var(--btn-ghost-b));
}

.btn-primary:hover,
.btn-primary:focus-visible,
.edit-btn:hover,
.edit-btn:focus-visible {
    border-color: transparent;
    box-shadow: 0 12px 24px var(--btn-primary-shadow);
}

.btn-ghost.danger,
.delete-rule-btn {
    color: var(--danger);
    border-color: rgba(196, 63, 86, 0.34);
    background: rgba(255, 236, 241, 0.76);
    box-shadow: none;
}

html[data-theme="dark"] .btn-ghost.danger,
html[data-theme="dark"] .delete-rule-btn {
    background: rgba(71, 26, 37, 0.68);
    border-color: rgba(255, 121, 146, 0.4);
}

.eyebrow {
    margin: 0 0 10px;
    color: var(--accent-strong);
    font-size: 0.72rem;
    letter-spacing: 0.2em;
    font-weight: 800;
    text-transform: uppercase;
}

.hero {
    display: grid;
    grid-template-columns: minmax(0, 1.4fr) minmax(280px, 0.8fr);
    gap: 14px;
    align-items: stretch;
    padding-top: 18px;
}

.hero > :only-child {
    grid-column: 1 / -1;
}

.hero-copy,
.hero-panel,
.section-card,
.path-card,
.tile,
.feature-card,
.cta-card,
.stat-chip,
.value-card,
.rules-hero-card,
.rules-edit-panel,
.rules-admin-card,
.check-item,
.rules-list li,
.auth-card,
.confirm-card,
.account-settings-card,
.account-settings-panel {
    border-radius: var(--radius-lg);
    border: 1px solid var(--border);
    background: linear-gradient(150deg, var(--surface-strong), var(--surface));
    box-shadow: var(--shadow-soft);
}

.hero-copy {
    padding: clamp(22px, 3vw, 34px);
}

.hero-copy h1 {
    max-width: 16ch;
}

.page-home .hero-copy h1 {
    max-width: 19ch;
    margin-bottom: 12px;
    line-height: 1.04;
    letter-spacing: -0.03em;
    text-wrap: balance;
}

.hero-copy p {
    max-width: 66ch;
    color: var(--text-muted);
}

.page-home .hero {
    padding-top: clamp(16px, 2.3vw, 28px);
    gap: clamp(12px, 1.7vw, 20px);
}

.page-home .hero-copy {
    padding: clamp(22px, 3.1vw, 36px);
}

.page-home .hero-copy p {
    max-width: 60ch;
    font-size: clamp(1rem, 0.96rem + 0.2vw, 1.08rem);
    line-height: 1.62;
}

.home-band {
    padding-block: clamp(14px, 2.2vw, 26px);
}

.home-section-head {
    max-width: 820px;
}

.page-home .section-head {
    margin: 6px 0 12px;
}

.page-home .eyebrow {
    margin-bottom: 12px;
    opacity: 0.94;
}

.home-section-head p {
    margin-bottom: 0;
}

.hero-panel {
    padding: 20px;
    display: grid;
    align-content: start;
    gap: 10px;
}

.hero-panel h3 {
    margin-bottom: 0;
    font-size: clamp(1.15rem, 2.2vw, 1.5rem);
}

.metric-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
}

.metric {
    display: grid;
    gap: 3px;
    min-height: 70px;
    padding: 10px 11px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: var(--surface-muted);
}

.metric span {
    color: var(--accent-strong);
    font-size: 1.12rem;
    font-weight: 800;
    line-height: 1;
}

.metric small {
    color: var(--text-faint);
    font-size: 0.75rem;
    line-height: 1.3;
    font-weight: 700;
}

.hero-list {
    margin: 0;
    padding-left: 16px;
    display: grid;
    gap: 7px;
}

.hero-list li {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.hero-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin: 20px 0 10px;
}

.page-home .hero-actions {
    margin: 18px 0 10px;
    gap: 9px;
}

.page-home .hero-actions .btn {
    min-height: 38px;
    padding: 7px 14px;
    border-radius: 11px;
    font-size: 0.92rem;
}

.page-home .hero-actions .btn-primary {
    background: linear-gradient(135deg, var(--hero-btn-primary-a), var(--hero-btn-primary-b));
    box-shadow: 0 8px 16px var(--hero-btn-primary-shadow);
}

.page-home .hero-actions .btn-ghost {
    border-color: var(--hero-btn-ghost-border);
    background: linear-gradient(150deg, var(--hero-btn-ghost-a), var(--hero-btn-ghost-b));
}

.page-home .hero-actions .btn-ghost:hover,
.page-home .hero-actions .btn-ghost:focus-visible {
    border-color: var(--hero-btn-ghost-hover-border);
    background: linear-gradient(150deg, var(--hero-btn-ghost-hover-a), var(--hero-btn-ghost-hover-b));
}

.hero-actions.centered {
    justify-content: center;
}

.pills {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
}

.page-home .pills {
    gap: 7px;
    margin-top: 8px;
}

.pill {
    display: inline-flex;
    align-items: center;
    min-height: 30px;
    padding: 6px 11px;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: var(--surface-muted);
    color: var(--text-muted);
    font-size: 0.82rem;
    font-weight: 700;
}

.page-home .pill {
    min-height: 28px;
    padding: 5px 10px;
    border-color: var(--hero-pill-border);
    background: var(--hero-pill-bg);
    color: var(--hero-pill-text);
    font-size: 0.78rem;
}

.section-head {
    max-width: 780px;
    margin: 8px 0 14px;
}

.section-head p {
    margin-bottom: 0;
}

.feature-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 14px;
}

.explore-list {
    margin: 0;
    padding: 0;
    list-style: none;
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: clamp(10px, 1.3vw, 16px);
}

.explore-list > li {
    min-width: 0;
}

.tile {
    position: relative;
    overflow: hidden;
    display: block;
    padding: clamp(16px, 1.7vw, 20px) clamp(14px, 1.5vw, 18px) clamp(13px, 1.3vw, 16px);
    transition: transform 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
}

.tile::after {
    content: "";
    position: absolute;
    inset: -20% -10%;
    background:
        radial-gradient(32% 38% at 16% 10%, rgba(19, 134, 183, 0.11), transparent 70%),
        radial-gradient(36% 44% at 84% 0%, rgba(14, 176, 193, 0.09), transparent 74%);
    opacity: 0;
    transition: opacity 180ms ease;
    pointer-events: none;
}

.tile:hover {
    transform: translateY(-1px);
    border-color: var(--border-strong);
    box-shadow: var(--shadow-soft);
}

.tile:hover::after {
    opacity: 1;
}

.tile-copy {
    min-width: 0;
    display: block;
}

.tile-icon {
    width: 46px;
    height: 46px;
    border-radius: 12px;
    display: grid;
    place-items: center;
    margin: 0 0 12px;
    font-size: 1.12rem;
    font-weight: 800;
    color: #ecfbff;
    border: 1px solid rgba(170, 225, 255, 0.34);
    box-shadow:
        inset 0 1px 0 rgba(227, 247, 255, 0.22),
        0 6px 14px rgba(11, 52, 84, 0.2);
    background:
        radial-gradient(80% 80% at 25% 20%, rgba(255, 255, 255, 0.24), transparent 66%),
        linear-gradient(140deg, #2577ab, #3aabbd);
}

.tile-icon span {
    position: relative;
    z-index: 1;
}

.tile-icon-rules {
    background:
        radial-gradient(80% 80% at 25% 20%, rgba(255, 255, 255, 0.24), transparent 66%),
        linear-gradient(140deg, #3a87c6, #47b3bd);
}

.tile-icon-about {
    background:
        radial-gradient(80% 80% at 25% 20%, rgba(255, 255, 255, 0.24), transparent 66%),
        linear-gradient(140deg, #3f83bc, #61afcf);
}

.tile-icon-chat {
    background:
        radial-gradient(80% 80% at 25% 20%, rgba(255, 255, 255, 0.24), transparent 66%),
        linear-gradient(140deg, #2f95bb, #59b9b0);
}

.tile-title {
    margin-bottom: 6px;
    font-size: 1.02rem;
    font-weight: 800;
    color: var(--text);
}

.tile p {
    margin: 0 0 8px;
    color: var(--text-muted);
    font-size: 0.94rem;
}

.tile-link {
    display: inline-flex;
    margin-top: 0;
    color: var(--accent-strong);
    font-size: 0.86rem;
    font-weight: 800;
}

.tile-arrow {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: none;
    place-items: center;
    border: 1px solid var(--border);
    color: var(--accent-strong);
    font-size: 0.92rem;
    font-weight: 900;
    background: var(--surface-strong);
}

.feature-card {
    padding: 16px 16px 14px;
}

.feature-card strong {
    display: block;
    margin-bottom: 7px;
    color: var(--accent-strong);
    font-size: 1rem;
}

.feature-card p {
    margin-bottom: 0;
}

.path-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 14px;
}

.path-card {
    position: relative;
    padding: 18px;
    overflow: hidden;
}

.path-number {
    display: inline-grid;
    place-items: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 1px solid var(--border);
    background: var(--accent-soft);
    color: var(--accent-strong);
    font-size: 0.84rem;
    font-weight: 800;
    margin-bottom: 12px;
}

.path-card h3 {
    margin-bottom: 6px;
    font-size: 1.16rem;
}

.path-card p {
    margin-bottom: 0;
}

.cta {
    margin: 26px auto 18px;
    text-align: center;
}

.cta-card {
    width: min(980px, 100%);
    margin-inline: auto;
    padding: clamp(22px, 3vw, 34px);
    border-color: var(--border-strong);
    background:
        radial-gradient(78% 68% at 12% 0%, rgba(14, 162, 192, 0.2), transparent 68%),
        radial-gradient(84% 72% at 90% 0%, rgba(20, 131, 179, 0.18), transparent 70%),
        linear-gradient(145deg, var(--surface-strong), var(--surface));
    box-shadow: var(--shadow-medium);
}

.cta-card p {
    max-width: 58ch;
    margin-inline: auto;
}

.content-split {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 14px;
}

.about-stats {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 10px;
    margin: 0 0 14px;
}

.stat-chip {
    padding: 12px 14px;
    display: grid;
    gap: 5px;
}

.stat-chip span {
    color: var(--accent-strong);
    font-size: 1.08rem;
    font-weight: 800;
    line-height: 1;
}

.stat-chip p {
    margin: 0;
    color: var(--text-faint);
    font-size: 0.82rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-weight: 700;
}

.value-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 12px;
    margin-top: 14px;
}

.value-card {
    padding: 16px;
}

.value-card h3 {
    margin-bottom: 6px;
    font-size: 1.06rem;
}

.value-card p {
    margin-bottom: 0;
}

.section-card {
    padding: clamp(18px, 2.5vw, 28px);
}

.section-card.stack {
    margin-top: 14px;
}

.list {
    margin: 0;
    padding-left: 18px;
    display: grid;
    gap: 9px;
}

.list li {
    color: var(--text-muted);
}

.list strong {
    color: var(--text);
}

.rules-layout {
    display: grid;
    gap: 16px;
    padding-top: 16px;
}

.rules-hero-card {
    display: grid;
    grid-template-columns: minmax(0, 1.3fr) minmax(260px, 0.8fr);
    gap: 14px;
    padding: 14px;
    border-radius: 18px;
    border: 1px solid rgba(91, 183, 231, 0.34);
    background:
        radial-gradient(95% 120% at 6% 0%, rgba(45, 162, 209, 0.17), transparent 55%),
        radial-gradient(110% 120% at 100% 100%, rgba(56, 126, 189, 0.14), transparent 58%),
        linear-gradient(152deg, rgba(8, 32, 54, 0.94), rgba(7, 25, 42, 0.92));
    box-shadow:
        0 16px 36px rgba(0, 7, 14, 0.34),
        inset 0 1px 0 rgba(173, 230, 255, 0.1);
}

.rules-head {
    position: relative;
    overflow: hidden;
    border-radius: 16px;
    border: 1px solid rgba(95, 185, 232, 0.32);
    background:
        radial-gradient(120% 120% at 0% 0%, rgba(41, 155, 205, 0.2), transparent 54%),
        linear-gradient(155deg, rgba(10, 38, 63, 0.92), rgba(8, 28, 48, 0.9));
    padding: clamp(20px, 2.8vw, 30px);
}

.rules-head::after {
    content: "";
    position: absolute;
    right: -34px;
    top: -34px;
    width: 130px;
    height: 130px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, rgba(67, 198, 235, 0.3), rgba(67, 198, 235, 0));
    pointer-events: none;
}

.rules-head h1 span {
    color: #31bdea;
}

.rules-head .eyebrow {
    margin-bottom: 12px;
    color: #66c6ec;
}

.rules-head h1 {
    color: #e8f6ff;
    font-size: clamp(2.2rem, 5vw, 4rem);
    letter-spacing: -0.02em;
}

.rules-lead {
    max-width: 48ch;
    margin-bottom: 0;
    color: #9ec5dc;
    font-size: clamp(1rem, 1.2vw, 1.2rem);
}

.rules-admin-card {
    padding: 18px;
    display: grid;
    gap: 14px;
    align-content: start;
    border-radius: 16px;
    border: 1px solid rgba(103, 190, 235, 0.42);
    background:
        radial-gradient(120% 110% at 0% 0%, rgba(48, 167, 214, 0.16), transparent 56%),
        linear-gradient(155deg, rgba(9, 36, 60, 0.94), rgba(8, 28, 49, 0.92));
    box-shadow:
        0 12px 28px rgba(0, 8, 16, 0.28),
        inset 0 1px 0 rgba(178, 232, 255, 0.11);
}

.rules-auth {
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    gap: 12px;
}

.auth-state-wrap {
    display: grid;
    gap: 9px;
}

.auth-state {
    width: fit-content;
    min-height: 30px;
    padding: 6px 11px;
    border-radius: 999px;
    border: 1px solid rgba(103, 191, 234, 0.38);
    background: linear-gradient(130deg, rgba(15, 54, 86, 0.95), rgba(16, 73, 106, 0.9));
    color: #8fe2ff;
    font-size: 0.76rem;
    font-weight: 800;
    letter-spacing: 0.06em;
    text-transform: uppercase;
}

.auth-user,
.auth-hint {
    margin: 0;
    font-size: 0.9rem;
    color: #8eb8d4;
}

.rules-controls {
    display: none;
    flex-wrap: wrap;
    gap: 10px;
}

.rules-controls .edit-btn,
.rules-edit-panel .edit-btn,
.page-rules .section-card.stack .btn-primary {
    border-color: transparent;
    color: #f5fdff;
    background: linear-gradient(135deg, #3f95ff, #2db5e8 52%, #4ed5bd);
    box-shadow: 0 10px 22px rgba(35, 151, 221, 0.32);
}

.rules-controls .edit-btn:hover,
.rules-edit-panel .edit-btn:hover,
.page-rules .section-card.stack .btn-primary:hover {
    box-shadow: 0 14px 26px rgba(35, 151, 221, 0.4);
}

.rules-controls .btn.btn-ghost,
.rules-edit-panel .btn.btn-ghost,
.page-rules .section-card.stack .btn.btn-ghost {
    border-color: rgba(98, 187, 231, 0.34);
    background: linear-gradient(145deg, rgba(10, 42, 69, 0.92), rgba(8, 34, 57, 0.9));
    color: #c9e7fb;
}

.rules-edit-panel {
    display: none;
    flex-direction: column;
    gap: 11px;
    padding: 16px;
    border-radius: 16px;
    border: 1px solid rgba(96, 185, 229, 0.34);
    background:
        radial-gradient(120% 120% at 0% 0%, rgba(43, 155, 205, 0.15), transparent 56%),
        linear-gradient(153deg, rgba(9, 34, 57, 0.92), rgba(8, 27, 46, 0.9));
}

.edit-row {
    display: grid;
    grid-template-columns: minmax(0, 1fr) auto;
    gap: 10px;
}

.bulk-row {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
}

.bulk-count {
    margin-left: auto;
    color: var(--text-faint);
    font-size: 0.86rem;
    font-weight: 700;
}

.edit-note {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-faint);
}

.edit-input {
    width: 100%;
    border: 1px solid var(--border);
    border-radius: 10px;
    min-height: 42px;
    padding: 9px 11px;
    font: inherit;
    color: var(--text);
    background: var(--surface-strong);
    outline: none;
}

.edit-input::placeholder {
    color: var(--text-faint);
}

.edit-input:focus {
    border-color: var(--border-strong);
    box-shadow: 0 0 0 3px var(--accent-soft);
}

.rules-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 10px;
}

.rules-checklist {
    margin-top: 0;
    border-radius: 18px;
    border: 1px solid rgba(91, 183, 231, 0.32);
    background:
        radial-gradient(100% 120% at 100% 0%, rgba(38, 156, 205, 0.14), transparent 55%),
        linear-gradient(152deg, rgba(8, 31, 53, 0.93), rgba(7, 26, 44, 0.91));
}

.rules-checklist h3 {
    margin-bottom: 14px;
    color: #e8f6ff;
}

.check-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 12px;
}

.check-item {
    padding: 16px;
    border-radius: 14px;
    border: 1px solid rgba(88, 178, 224, 0.28);
    background: linear-gradient(150deg, rgba(10, 40, 66, 0.86), rgba(8, 30, 52, 0.84));
    box-shadow: inset 0 1px 0 rgba(164, 226, 255, 0.08);
}

.check-item strong {
    display: block;
    margin-bottom: 6px;
    color: #48c6f3;
    font-size: 0.96rem;
}

.check-item p {
    margin: 0;
    color: #a4c6dd;
    font-size: 0.9rem;
}

.page-rules .section-card.stack {
    border-radius: 18px;
    border: 1px solid rgba(94, 186, 232, 0.3);
    background:
        radial-gradient(120% 120% at 0% 100%, rgba(39, 157, 205, 0.13), transparent 56%),
        linear-gradient(152deg, rgba(8, 31, 53, 0.93), rgba(7, 25, 43, 0.91));
}

.page-rules .section-card.stack h3 {
    color: #e6f5ff;
}

.page-rules .section-card.stack p {
    color: #9ec4dd;
}

.rules-list li {
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
    min-height: 58px;
    padding: 12px 14px 12px 64px;
    transition: border-color 160ms ease, transform 160ms ease, box-shadow 160ms ease;
}

.rules-list li::before {
    content: attr(data-rule-number);
    position: absolute;
    left: 14px;
    top: 50%;
    translate: 0 -50%;
    min-width: 34px;
    height: 30px;
    padding-inline: 8px;
    display: inline-grid;
    place-items: center;
    border-radius: 10px;
    background: var(--accent-soft);
    border: 1px solid var(--border);
    color: var(--accent-strong);
    font-size: 0.8rem;
    font-weight: 800;
}

.rules-list li:not([data-rule-number])::before,
.rules-list li[data-rule-number=""]::before {
    display: none;
}

.rules-list li:not([data-rule-number]),
.rules-list li[data-rule-number=""] {
    padding-left: 14px;
}

.rules-list li.is-draggable {
    padding-left: 122px;
}

.rule-select {
    position: absolute;
    left: 61px;
    top: 50%;
    translate: 0 -50%;
    width: 18px;
    height: 18px;
    accent-color: var(--accent);
    cursor: pointer;
}

.drag-handle {
    position: absolute;
    left: 86px;
    top: 50%;
    translate: 0 -50%;
    min-width: 28px;
    height: 30px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--surface-muted);
    color: var(--text-faint);
    font-size: 0.94rem;
    font-weight: 700;
    cursor: grab;
}

.drag-handle:active {
    cursor: grabbing;
}

.rule-text {
    flex: 1;
    min-width: 0;
    color: var(--text);
}

.rule-actions {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 8px;
}

.rules-list li:hover {
    border-color: var(--border-strong);
    box-shadow: var(--shadow-soft);
}

.rules-list li.is-dragging {
    opacity: 0.58;
    transform: scale(0.995);
}

.rules-list li.drag-over {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px var(--accent-soft);
}

body.is-edit-mode .rules-edit-panel {
    border-color: var(--accent-strong);
    box-shadow: 0 0 0 3px var(--accent-soft), var(--shadow-medium);
}

body.page-rules.pref-editor-focus .rules-admin-card,
body.page-rules.pref-editor-focus .rules-edit-panel {
    border-color: var(--accent-strong);
    box-shadow: 0 0 0 3px var(--accent-soft), var(--shadow-medium);
}

.auth-modal,
.account-settings-modal,
.confirm-modal {
    position: fixed;
    inset: 0;
    z-index: 40;
    display: none;
    place-items: center;
    padding: clamp(12px, 2.4vw, 22px);
    background:
        radial-gradient(120% 140% at 0% 0%, rgba(28, 120, 166, 0.2), transparent 58%),
        radial-gradient(120% 140% at 100% 100%, rgba(28, 151, 191, 0.16), transparent 62%),
        rgba(3, 11, 20, 0.7);
    backdrop-filter: blur(6px) saturate(1.08);
}

.auth-modal.open,
.account-settings-modal.open,
.confirm-modal.open {
    display: grid;
}

.auth-card,
.confirm-card {
    width: min(560px, 95vw);
    overflow: hidden;
}

.auth-card {
    border-radius: 18px;
    border: 1px solid rgba(92, 179, 224, 0.38);
    background:
        radial-gradient(130% 105% at 0% 0%, rgba(44, 151, 206, 0.18), transparent 56%),
        linear-gradient(160deg, rgba(7, 28, 46, 0.97), rgba(7, 24, 40, 0.95));
    box-shadow:
        0 24px 50px rgba(0, 7, 16, 0.52),
        inset 0 1px 0 rgba(178, 232, 255, 0.14);
}

.auth-head {
    padding: clamp(18px, 2.2vw, 24px) clamp(18px, 2.3vw, 26px) clamp(12px, 1.6vw, 16px);
    border-bottom: 1px solid rgba(97, 185, 231, 0.2);
    background: linear-gradient(180deg, rgba(34, 126, 178, 0.16), rgba(34, 126, 178, 0));
}

.auth-head h3 {
    margin-bottom: 6px;
    font-size: clamp(1.75rem, 4vw, 2.35rem);
    letter-spacing: -0.01em;
    color: #e7f6ff;
}

.auth-head p {
    margin: 0;
    max-width: 46ch;
    color: #9fcae4;
    font-size: 0.96rem;
}

.auth-body {
    padding: clamp(14px, 2vw, 20px) clamp(18px, 2.3vw, 26px) clamp(16px, 2.2vw, 22px);
    display: grid;
    gap: 12px;
}

.auth-mode-tabs {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 6px;
    margin-bottom: 2px;
    padding: 4px;
    border-radius: 12px;
    border: 1px solid rgba(93, 181, 226, 0.28);
    background: rgba(10, 40, 66, 0.7);
}

.auth-mode-btn {
    min-height: 42px;
    border-radius: 10px;
    border: 1px solid transparent;
    background: transparent;
    color: #a3c4dc;
    font: inherit;
    font-size: 0.98rem;
    font-weight: 800;
    cursor: pointer;
    transition: background 150ms ease, color 150ms ease, border-color 150ms ease, transform 150ms ease;
}

.auth-mode-btn:hover {
    color: #ddf2ff;
    border-color: rgba(96, 181, 225, 0.42);
    background: rgba(29, 109, 161, 0.28);
}

.auth-mode-btn.active {
    color: #f4fdff;
    border-color: transparent;
    background: linear-gradient(135deg, #2eb7e5, #43d2ef);
    box-shadow: 0 6px 14px rgba(27, 176, 220, 0.3);
}

.auth-field-group {
    display: grid;
    gap: 7px;
    margin: 0;
}

.auth-field-group label {
    font-size: 0.74rem;
    font-weight: 800;
    letter-spacing: 0.07em;
    text-transform: uppercase;
    color: #8fb9d4;
}

.auth-field-group .edit-input {
    min-height: 44px;
    border-radius: 12px;
    border: 1px solid rgba(97, 182, 225, 0.34);
    background: rgba(6, 31, 52, 0.82);
    color: #e9f8ff;
    padding-inline: 14px;
}

.auth-field-group .edit-input::placeholder {
    color: #6fa2c4;
}

.auth-field-group .edit-input:focus {
    border-color: rgba(120, 211, 255, 0.65);
    box-shadow: 0 0 0 3px rgba(59, 178, 227, 0.22);
}

.auth-helper-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    min-height: 22px;
}

.auth-link-btn {
    appearance: none;
    border: 0;
    padding: 0;
    background: none;
    color: #8fc5e5;
    font: inherit;
    font-size: 0.82rem;
    font-weight: 700;
    letter-spacing: 0.01em;
    cursor: pointer;
}

.auth-link-btn:hover,
.auth-link-btn:focus-visible {
    color: #dff4ff;
    text-decoration: underline;
    text-underline-offset: 2px;
}

.auth-code-group {
    margin: 0;
}

.auth-code-row {
    display: grid;
    grid-template-columns: minmax(0, 1fr) auto auto;
    gap: 8px;
}

.auth-inline-btn {
    min-height: 44px;
    padding-inline: 12px;
    border-radius: 10px;
    font-size: 0.78rem;
    font-weight: 700;
}

.auth-inline-secondary {
    min-width: 84px;
}

.auth-card-actions {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
    margin-top: 4px;
}

.auth-card-actions #auth-cancel-btn,
.auth-card-actions #global-auth-cancel-btn {
    grid-column: 1 / -1;
}

.auth-card-actions .edit-btn,
.auth-card-actions .btn {
    min-height: 44px;
    border-radius: 12px;
    font-size: 0.96rem;
    font-weight: 800;
}

.auth-card-actions .btn.btn-ghost {
    background: rgba(8, 35, 58, 0.82);
    border-color: rgba(95, 181, 225, 0.28);
    color: #d5edff;
}

.auth-card-actions .btn.btn-ghost:hover {
    background: rgba(13, 45, 74, 0.9);
    border-color: rgba(121, 205, 246, 0.5);
    box-shadow: none;
    transform: none;
}

.auth-message {
    min-height: 24px;
    margin: 0;
    padding: 0 clamp(18px, 2.3vw, 26px) clamp(16px, 2.2vw, 20px);
    color: #91b9d3;
    font-size: 0.84rem;
    font-weight: 600;
}

.auth-message.error {
    color: #ff9bb1;
}

html[data-theme="bright"] .auth-card {
    border-color: rgba(47, 136, 183, 0.32);
    background:
        radial-gradient(130% 105% at 0% 0%, rgba(58, 160, 206, 0.22), transparent 56%),
        linear-gradient(160deg, rgba(246, 251, 255, 0.98), rgba(231, 243, 255, 0.95));
    box-shadow:
        0 20px 42px rgba(11, 67, 109, 0.23),
        inset 0 1px 0 rgba(255, 255, 255, 0.78);
}

html[data-theme="bright"] .auth-head {
    border-bottom-color: rgba(44, 138, 187, 0.22);
    background: linear-gradient(180deg, rgba(69, 165, 211, 0.17), rgba(69, 165, 211, 0.02));
}

html[data-theme="bright"] .auth-head h3 {
    color: #133657;
}

html[data-theme="bright"] .auth-head p {
    color: #4f7596;
}

html[data-theme="bright"] .auth-mode-tabs {
    background: rgba(224, 241, 255, 0.75);
    border-color: rgba(42, 130, 178, 0.24);
}

html[data-theme="bright"] .auth-mode-btn {
    color: #3f6282;
}

html[data-theme="bright"] .auth-mode-btn:hover {
    color: #173f61;
    border-color: rgba(48, 134, 181, 0.35);
    background: rgba(85, 171, 216, 0.2);
}

html[data-theme="bright"] .auth-field-group label {
    color: #557a99;
}

html[data-theme="bright"] .auth-field-group .edit-input {
    border-color: rgba(66, 145, 190, 0.34);
    background: rgba(245, 251, 255, 0.95);
    color: #173a5a;
}

html[data-theme="bright"] .auth-field-group .edit-input::placeholder {
    color: #7294b1;
}

html[data-theme="bright"] .auth-link-btn {
    color: #3f7196;
}

html[data-theme="bright"] .auth-link-btn:hover,
html[data-theme="bright"] .auth-link-btn:focus-visible {
    color: #134264;
}

html[data-theme="bright"] .auth-card-actions .btn.btn-ghost {
    background: rgba(238, 248, 255, 0.92);
    border-color: rgba(66, 145, 190, 0.3);
    color: #1e4a6e;
}

html[data-theme="bright"] .auth-message {
    color: #5f84a2;
}

.confirm-card {
    padding: 18px;
}

.confirm-card h3 {
    margin-bottom: 6px;
}

.confirm-card p {
    margin-bottom: 0;
    color: var(--text-muted);
}

.confirm-actions {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    margin-top: 14px;
}

.account-settings-card {
    width: min(1100px, 95vw);
    max-height: 92vh;
    overflow: auto;
    padding: 0;
}

.account-settings-head {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 14px;
    padding: 24px 24px 16px;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 2;
    background: linear-gradient(150deg, var(--surface-strong), var(--surface));
}

.account-settings-title-wrap {
    display: grid;
    gap: 5px;
}

.account-settings-eyebrow {
    margin: 0;
    color: var(--accent-strong);
    font-size: 0.7rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    font-weight: 800;
}

.account-settings-head h3 {
    margin: 0;
    font-size: clamp(1.8rem, 3.8vw, 2.55rem);
}

.account-settings-head p {
    margin: 0;
    color: var(--text-faint);
    max-width: 64ch;
}

.account-settings-close {
    min-height: 38px;
    min-width: 80px;
    border-radius: 9px;
    border: 1px solid var(--border);
    background: var(--surface-muted);
    color: var(--text);
    font: inherit;
    font-weight: 700;
    cursor: pointer;
}

.account-settings-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    padding: 0 24px 14px;
}

.account-settings-panel {
    padding: 12px;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: var(--surface-muted);
    box-shadow: none;
}

.account-settings-panel-wide {
    grid-column: 1 / -1;
}

.account-settings-panel h4 {
    margin: 0 0 8px;
    font-size: 0.9rem;
    color: var(--accent-strong);
    letter-spacing: 0.08em;
    text-transform: uppercase;
}

.account-setting-row + .account-setting-row {
    margin-top: 10px;
}

.account-settings-card label {
    display: block;
    margin-bottom: 6px;
    font-size: 0.78rem;
    font-weight: 700;
    color: var(--text-faint);
}

.account-toggle {
    display: grid;
    grid-template-columns: minmax(0, 1fr) auto;
    align-items: center;
    gap: 12px;
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 12px;
    background: rgba(255, 255, 255, 0.08);
}

.account-toggle + .account-toggle {
    margin-top: 6px;
}

.account-toggle input {
    order: 2;
    width: 17px;
    height: 17px;
    margin: 0;
    accent-color: var(--accent);
}

.account-toggle span {
    order: 1;
    display: grid;
    gap: 2px;
}

.account-toggle span strong {
    color: var(--text);
    font-size: 0.86rem;
}

.account-toggle span small {
    color: var(--text-faint);
    font-size: 0.78rem;
}

.account-reco-list {
    margin: 0 0 10px;
    padding-left: 18px;
    color: var(--text-faint);
}

.account-settings-inline-actions {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
}

.account-settings-link-list {
    margin: 0;
    padding: 0;
    list-style: none;
    display: grid;
    gap: 6px;
}

.account-settings-link-btn {
    width: 100%;
    min-height: 36px;
    border-radius: 9px;
    border: 1px solid var(--border);
    background: var(--surface-strong);
    color: var(--text);
    text-align: left;
    padding: 8px 11px;
    font: inherit;
    font-size: 0.86rem;
    font-weight: 700;
    cursor: pointer;
    transition: border-color 160ms ease, background 160ms ease;
}

.account-settings-link-btn:hover,
.account-settings-link-btn:focus-visible {
    border-color: var(--border-strong);
    background: var(--accent-soft);
}

.account-settings-msg {
    margin: 0;
    min-height: 20px;
    color: var(--text-faint);
    font-size: 0.8rem;
}

.account-settings-msg.error {
    color: var(--danger);
}

.account-settings-footer {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: 12px;
    padding: 14px 24px 22px;
    border-top: 1px solid var(--border);
    position: sticky;
    bottom: 0;
    z-index: 2;
    background: linear-gradient(150deg, var(--surface-strong), var(--surface));
}

.account-settings-actions {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    min-width: 320px;
    gap: 10px;
}

.rules-toast {
    position: fixed;
    right: 16px;
    bottom: 16px;
    z-index: 42;
    max-width: min(360px, calc(100vw - 26px));
    padding: 11px 14px;
    border-radius: 11px;
    border: 1px solid rgba(20, 110, 168, 0.4);
    background: var(--surface-strong);
    color: var(--text);
    font-size: 0.88rem;
    font-weight: 700;
    box-shadow: var(--shadow-medium);
    opacity: 0;
    pointer-events: none;
    transform: translateY(8px);
    transition: opacity 180ms ease, transform 180ms ease;
}

html[data-theme="dark"] .rules-toast {
    background: rgba(8, 27, 45, 0.95);
    border-color: rgba(90, 181, 237, 0.46);
}

.rules-toast.open {
    opacity: 1;
    transform: translateY(0);
}

.rules-toast.is-error {
    border-color: rgba(196, 63, 86, 0.5);
    color: var(--danger);
}

.footer {
    margin-top: 18px;
    padding-top: 16px;
    padding-bottom: 32px;
    border-top: 1px solid var(--border);
    color: var(--text-faint);
    text-align: center;
    font-size: 0.86rem;
}

@keyframes reveal-up {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (prefers-reduced-motion: no-preference) {
    html:not(.low-end-mode) body.page:not(.pref-no-transitions):not(.pref-min-effects) .hero-copy,
    html:not(.low-end-mode) body.page:not(.pref-no-transitions):not(.pref-min-effects) .hero-panel,
    html:not(.low-end-mode) body.page:not(.pref-no-transitions):not(.pref-min-effects) .rules-hero-card,
    html:not(.low-end-mode) body.page:not(.pref-no-transitions):not(.pref-min-effects) .section-card.stack,
    html:not(.low-end-mode) body.page:not(.pref-no-transitions):not(.pref-min-effects) .rules-checklist {
        animation: reveal-up 480ms ease-out both;
    }

    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .tile,
    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .feature-card,
    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .path-card,
    html:not(.low-end-mode) body.page-about:not(.pref-no-transitions):not(.pref-min-effects) .stat-chip,
    html:not(.low-end-mode) body.page-about:not(.pref-no-transitions):not(.pref-min-effects) .value-card,
    html:not(.low-end-mode) body.page-rules:not(.pref-no-transitions):not(.pref-min-effects) .check-item {
        animation: reveal-up 520ms ease-out both;
    }

    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .explore-list > li:nth-child(1) .tile,
    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .feature-card:nth-child(1),
    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .path-card:nth-child(1),
    html:not(.low-end-mode) body.page-about:not(.pref-no-transitions):not(.pref-min-effects) .stat-chip:nth-child(1),
    html:not(.low-end-mode) body.page-about:not(.pref-no-transitions):not(.pref-min-effects) .value-card:nth-child(1),
    html:not(.low-end-mode) body.page-rules:not(.pref-no-transitions):not(.pref-min-effects) .check-item:nth-child(1) {
        animation-delay: 70ms;
    }

    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .explore-list > li:nth-child(2) .tile,
    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .feature-card:nth-child(2),
    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .path-card:nth-child(2),
    html:not(.low-end-mode) body.page-about:not(.pref-no-transitions):not(.pref-min-effects) .stat-chip:nth-child(2),
    html:not(.low-end-mode) body.page-about:not(.pref-no-transitions):not(.pref-min-effects) .value-card:nth-child(2),
    html:not(.low-end-mode) body.page-rules:not(.pref-no-transitions):not(.pref-min-effects) .check-item:nth-child(2) {
        animation-delay: 130ms;
    }

    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .explore-list > li:nth-child(3) .tile,
    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .feature-card:nth-child(3),
    html:not(.low-end-mode) body.page-home:not(.pref-no-transitions):not(.pref-min-effects) .path-card:nth-child(3),
    html:not(.low-end-mode) body.page-about:not(.pref-no-transitions):not(.pref-min-effects) .stat-chip:nth-child(3),
    html:not(.low-end-mode) body.page-about:not(.pref-no-transitions):not(.pref-min-effects) .value-card:nth-child(3),
    html:not(.low-end-mode) body.page-rules:not(.pref-no-transitions):not(.pref-min-effects) .check-item:nth-child(3) {
        animation-delay: 190ms;
    }
}

body.pref-compact-topbar .topbar {
    border-radius: 0;
}

body.pref-compact-topbar .pmain-bar {
    min-height: 36px;
    gap: 5px;
    padding: 3px 6px;
}

body.pref-compact-topbar .topbar .brand {
    min-height: 27px;
    padding: 3px 8px;
    font-size: 0.77rem;
    border-radius: 8px;
}

body.pref-compact-topbar .nav {
    padding: 2px;
    gap: 2px;
}

body.pref-compact-topbar .nav a,
body.pref-compact-topbar .nav .btn,
body.pref-compact-topbar .auth-top-btn {
    min-height: 24px;
    padding: 2px 8px;
}

body.pref-no-transitions *,
body.pref-no-transitions *::before,
body.pref-no-transitions *::after,
html.low-end-mode *,
html.low-end-mode *::before,
html.low-end-mode *::after {
    animation: none !important;
    transition: none !important;
}

html.low-end-mode body.page,
body.pref-min-effects {
    background-image: linear-gradient(180deg, var(--bg) 0%, var(--bg-soft) 60%, var(--bg-deep) 100%);
}

html.low-end-mode body.page::before,
body.pref-min-effects::before {
    display: none;
}

html.low-end-mode .topbar,
html.low-end-mode .auth-modal,
html.low-end-mode .account-settings-modal,
body.pref-min-effects .topbar,
body.pref-min-effects .auth-modal,
body.pref-min-effects .account-settings-modal {
    backdrop-filter: none !important;
}

html.low-end-mode .hero-copy,
html.low-end-mode .hero-panel,
html.low-end-mode .section-card,
html.low-end-mode .path-card,
html.low-end-mode .tile,
html.low-end-mode .feature-card,
html.low-end-mode .stat-chip,
html.low-end-mode .value-card,
html.low-end-mode .rules-hero-card,
html.low-end-mode .rules-admin-card,
html.low-end-mode .rules-edit-panel,
html.low-end-mode .check-item,
html.low-end-mode .rules-list li,
body.pref-min-effects .hero-copy,
body.pref-min-effects .hero-panel,
body.pref-min-effects .section-card,
body.pref-min-effects .path-card,
body.pref-min-effects .tile,
body.pref-min-effects .feature-card,
body.pref-min-effects .stat-chip,
body.pref-min-effects .value-card,
body.pref-min-effects .rules-hero-card,
body.pref-min-effects .rules-admin-card,
body.pref-min-effects .rules-edit-panel,
body.pref-min-effects .check-item,
body.pref-min-effects .rules-list li {
    box-shadow: none !important;
}

@media (max-width: 1120px) {
    .hero {
        grid-template-columns: 1fr;
    }

    .feature-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .path-grid,
    .value-grid,
    .check-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .rules-hero-card {
        grid-template-columns: 1fr;
    }

    .account-settings-layout {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 860px) {
    .page-home .hero-copy h1 {
        max-width: 20ch;
    }

    .page-home .hero-copy p {
        font-size: 0.97rem;
        line-height: 1.58;
    }

    .topbar {
        top: 0;
        border-radius: 0;
    }

    .pmain-bar {
        align-items: center;
        gap: 4px;
        padding: 3px 4px;
    }

    .topbar-left {
        flex-basis: 100%;
    }

    .topbar .brand {
        max-inline-size: 100%;
    }

    .nav {
        margin-left: 0;
        flex: 1 1 100%;
        min-width: 0;
        width: 100%;
        justify-content: flex-start;
        gap: 2px;
    }

    .nav a,
    .nav .btn,
    .auth-top-btn {
        flex: 0 1 auto;
    }

    .explore-list {
        grid-template-columns: 1fr;
        gap: 8px;
    }

    .explore-item {
        display: grid;
        grid-template-columns: auto minmax(0, 1fr) auto;
        align-items: center;
        gap: 10px;
        min-height: 0;
        padding: 11px 12px;
    }

    .explore-item .tile-icon {
        margin: 0;
        width: 38px;
        height: 38px;
        border-radius: 12px;
        font-size: 0.94rem;
    }

    .explore-item .tile-copy {
        min-width: 0;
        display: grid;
        gap: 1px;
    }

    .explore-item .tile-title {
        margin-bottom: 1px;
        font-size: 1rem;
    }

    .explore-item p {
        margin: 0;
        font-size: 0.86rem;
    }

    .explore-item .tile-link {
        margin-top: 5px;
        font-size: 0.83rem;
    }

    .tile-arrow {
        display: grid;
        width: 28px;
        height: 28px;
        border-color: rgba(160, 209, 231, 0.34);
        background: var(--surface-muted);
    }

    .about-stats {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .content-split {
        grid-template-columns: 1fr;
    }

    .auth-code-row {
        grid-template-columns: minmax(0, 1fr);
    }

    .auth-card-actions {
        grid-template-columns: 1fr;
    }

    .account-settings-head {
        padding: 16px 14px 12px;
    }

    .account-settings-layout {
        padding: 0 14px 12px;
    }

    .account-settings-footer {
        grid-template-columns: 1fr;
        padding: 12px 14px 14px;
    }

    .account-settings-actions {
        min-width: 0;
        grid-template-columns: 1fr;
    }
}

@media (max-width: 640px) {
    .shell {
        width: min(1120px, 94vw);
    }

    .auth-card {
        width: min(560px, 96vw);
        border-radius: 14px;
    }

    .auth-head {
        padding: 16px 14px 10px;
    }

    .auth-head h3 {
        font-size: clamp(1.45rem, 8vw, 1.95rem);
    }

    .auth-head p {
        font-size: 0.9rem;
    }

    .auth-body {
        padding: 12px 14px 14px;
        gap: 10px;
    }

    .auth-mode-btn {
        min-height: 38px;
        font-size: 0.92rem;
    }

    .auth-helper-row {
        flex-wrap: wrap;
        gap: 6px 10px;
    }

    .auth-field-group .edit-input,
    .auth-inline-btn,
    .auth-card-actions .edit-btn,
    .auth-card-actions .btn {
        min-height: 40px;
    }

    .auth-message {
        padding: 0 14px 14px;
    }

    .topbar {
        border-radius: 0;
    }

    .pmain-bar {
        padding: 2px 3px;
    }

    .topbar .brand {
        padding: 3px 6px;
        font-size: 0.74rem;
    }

    .nav {
        padding: 1px;
        gap: 2px;
    }

    .nav a,
    .nav .btn,
    .auth-top-btn {
        min-height: 22px;
        padding: 2px 6px;
        font-size: 0.74rem;
    }

    .hero-copy,
    .hero-panel,
    .section-card,
    .path-card,
    .cta-card,
    .stat-chip,
    .value-card,
    .rules-head,
    .rules-admin-card,
    .check-item,
    .rules-edit-panel {
        padding: 14px;
    }

    .metric-grid,
    .about-stats,
    .path-grid,
    .value-grid,
    .check-grid,
    .feature-grid {
        grid-template-columns: 1fr;
    }

    .page-home .hero-copy {
        padding: 16px 12px;
    }

    .page-home .hero-copy h1 {
        line-height: 1.05;
    }

    .page-home .hero-copy p {
        font-size: 0.92rem;
    }

    .home-band {
        padding-block: 10px;
    }

    .explore-item {
        padding: 10px 10px;
    }

    .explore-item .tile-icon {
        width: 34px;
        height: 34px;
        border-radius: 10px;
        font-size: 0.88rem;
    }

    .explore-item .tile-title {
        font-size: 0.94rem;
    }

    .explore-item p {
        font-size: 0.82rem;
    }

    .explore-item .tile-link {
        font-size: 0.78rem;
    }

    .edit-row {
        grid-template-columns: 1fr;
    }

    .bulk-count {
        margin-left: 0;
        width: 100%;
    }

    .rules-list li {
        padding-right: 10px;
        align-items: flex-start;
    }

    .rules-list li.is-draggable {
        padding-left: 106px;
    }

    .drag-handle {
        left: 74px;
    }

    .rule-select {
        left: 52px;
    }

    .rule-actions {
        margin-left: 8px;
    }

    .rules-toast {
        right: 10px;
        left: 10px;
        bottom: 10px;
        max-width: none;
    }
}

@media (prefers-reduced-motion: reduce) {
    body.page-anim-ready,
    body.page-enter,
    body.page-leave {
        transition: none !important;
        transform: none !important;
        opacity: 1 !important;
    }
}
